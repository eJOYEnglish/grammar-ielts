/* Study Plan Specific Styles */

:root {
    /* Colors from Tailwind config/design */
    --study-bg-light: #ffffff;
    --study-bg-dark: #101b22;
    --study-text-light: #111518;
    --study-text-dark: #ffffff;
    --study-text-secondary-light: #607a8a;
    --study-text-secondary-dark: #9aaebc;
    --study-primary: #1da1f2;
    --study-shadow-soft: 0 8px 30px -4px rgba(0, 0, 0, 0.08);
    --study-radius-lg: 16px;
    --study-radius-pill: 9999px;
}

/* Page Layout */
.study-plan-container {
    min-height: 100vh;
    background-color: var(--study-bg-light);
    color: var(--study-text-light);
    font-family: var(--font-family);
    padding-bottom: 112px;
    /* Space for fixed footer */
    width: 100%;
}

/* Header */
.study-plan-header {
    position: sticky;
    top: 0;
    z-index: 50;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px;
    background-color: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid #f9fafb;
}

.header-btn {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    color: var(--study-text-light);
    transition: background-color 0.2s;
    background: transparent;
    border: none;
    cursor: pointer;
}

.header-btn:hover {
    background-color: rgba(0, 0, 0, 0.05);
}

.header-title {
    font-size: 18px;
    font-weight: 700;
    color: var(--study-text-light);
    flex: 1;
    text-align: center;
    margin: 0;
}

/* Hero Section */
.study-plan-hero {
    padding: 24px 24px 8px;
}

.plan-headline {
    font-size: 28px;
    font-weight: 700;
    line-height: 1.2;
    color: var(--study-text-light);
    margin-bottom: 8px;
}

.plan-subtitle {
    font-size: 16px;
    color: var(--study-text-secondary-light);
    line-height: 1.5;
    max-width: 90%;
}

/* Main Content Area */
.study-plan-main {
    display: flex;
    flex-direction: column;
    gap: 24px;
    padding: 16px 24px;
}

/* Recommendation Cards */
.recommendation-cards {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
}

.recommendation-card {
    position: relative;
    height: 150px;
    border-radius: var(--study-radius-lg);
    overflow: hidden;
    box-shadow: var(--study-shadow-soft);
    text-decoration: none;
    transition: transform 0.2s;
    display: block;
}

.recommendation-card:active {
    transform: scale(0.98);
}

.recommendation-card__image {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s;
}

.recommendation-card:hover .recommendation-card__image {
    transform: scale(1.1);
}

.recommendation-card__overlay {
    position: absolute;
    inset: 0;
}

.recommendation-card--book .recommendation-card__overlay {
    background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
}

.recommendation-card--ejoy .recommendation-card__overlay {
    background: linear-gradient(to top, rgba(29, 161, 242, 0.8), transparent);
}

.recommendation-card__content {
    position: absolute;
    inset: 0;
    padding: 12px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.recommendation-card__icon-badge {
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(4px);
    border-radius: 8px;
    padding: 6px;
    align-self: flex-start;
    display: flex;
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.recommendation-card--ejoy .recommendation-card__icon-badge {
    background: #1da1f2;
    border: none;
}

.recommendation-card__label {
    color: rgba(255, 255, 255, 0.9);
    font-size: 8px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 2px;
}

.recommendation-card__title {
    color: white;
    font-weight: 700;
    font-size: 14px;
    line-height: 1.2;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    margin: 0;
}

/* Section Header */
.section-header {
    font-size: 14px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--study-text-light);
    opacity: 0.8;
    margin-bottom: -12px;
    /* Pull closer to list */
    margin-top: 8px;
}

/* Topic Cards */
.topic-cards {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.topic-card {
    background: white;
    border-radius: var(--study-radius-lg);
    padding: 20px;
    box-shadow: var(--study-shadow-soft);
    border: 1px solid #f3f4f6;
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.topic-card__header {
    border-bottom: 1px solid #f9fafb;
    padding-bottom: 12px;
}

.topic-card__name {
    font-size: 18px;
    font-weight: 700;
    color: var(--study-text-light);
    margin: 0;
}

.topic-card__resource {
    display: flex;
    align-items: flex-start;
    gap: 16px;
}

.topic-card__icon-badge {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.topic-card__icon-badge--book {
    background-color: #eff6ff;
    color: #3b82f6;
}

.topic-card__icon-badge--video {
    background-color: #fff7ed;
    color: #f97316;
}

.topic-card__resource-content {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.topic-card__resource-label {
    font-size: 10px;
    font-weight: 700;
    color: #9aaebc;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.topic-card__resource-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--study-text-light);
    margin: 0;
}

.topic-card__resource-link {
    font-size: 14px;
    font-weight: 700;
    color: #1da1f2;
    /* Explicit Blue */
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 4px;
    transition: color 0.2s;
}

.topic-card__resource-link:hover {
    text-decoration: underline;
    color: #0c85d0;
    /* Slightly darker blue on hover */
}

/* Footer */
.study-plan-footer {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 48px 16px 16px;
    /* High top padding for gradient fade */
    background: linear-gradient(to top, white, white, rgba(255, 255, 255, 0));
    z-index: 40;
}

.primary-btn {
    width: 100%;
    height: 56px;
    background-color: var(--study-primary);
    color: white;
    border-radius: var(--study-radius-pill);
    font-size: 18px;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    border: none;
    box-shadow: 0 10px 15px -3px rgba(29, 161, 242, 0.3);
    transition: opacity 0.2s, transform 0.1s;
    cursor: pointer;
}

.primary-btn:hover {
    opacity: 0.9;
}

.primary-btn:active {
    transform: scale(0.98);
}

/* Print Styles */
@media print {

    /* Hide non-printable elements */
    .btn,
    .header-btn,
    .study-plan-footer,
    .study-plan-header button,
    header,
    .share-button-wrapper,
    .screen-only {
        display: none !important;
    }

    /* Global Print Settings */
    @page {
        margin: 0.5cm;
        size: auto;
    }

    html,
    body {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
        background-color: white !important;
        color: black !important;
    }

    /* Reset layout for paper */
    .study-plan-container,
    .email-request-page {
        padding: 0 !important;
        margin: 0 !important;
        max-width: 100% !important;
        background: white !important;
        height: auto !important;
        min-height: 0 !important;
        overflow: visible !important;
        width: 100% !important;
        display: block !important;
    }

    .study-plan-header {
        display: none !important;
    }

    .study-plan-main {
        padding: 0 !important;
        margin: 0 !important;
        height: auto !important;
        width: 100% !important;
        display: block !important;
    }

    .study-plan-hero {
        padding: 0 0 16px 0 !important;
    }

    /* FORCE COLOR RULES */
    * {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
        text-shadow: none !important;
        box-shadow: none !important;
    }

    /* 1. Black Text for Readability */
    h1,
    h2,
    h3,
    h4,
    p,
    li,
    div,
    span {
        color: black !important;
    }

    /* 2. White Text Exceptions (Cards) */
    .recommendation-card h4,
    .recommendation-card p,
    .recommendation-card span,
    .recommendation-card .material-symbols-outlined {
        color: white !important;
    }

    /* 3. Blue Accents (Links & Badges) - Specificity override */
    a.topic-card__resource-link,
    .topic-card__resource-link:link,
    .topic-card__resource-link:visited {
        color: #1da1f2 !important;
        text-decoration: none !important;
    }

    /* Ensure the span inside the link is also blue */
    .topic-card__resource-link span,
    .topic-card__resource-link .material-symbols-outlined {
        color: #1da1f2 !important;
    }

    .badge-level {
        color: #1e40af !important;
        background-color: #dbeafe !important;
        border: 1px solid #1e40af !important;
    }

    /* Icons in list */
    .topic-card__icon-badge--book,
    .topic-card__icon-badge--book span {
        color: #3b82f6 !important;
        background-color: #eff6ff !important;
    }

    .topic-card__icon-badge--video,
    .topic-card__icon-badge--video span {
        color: #f97316 !important;
        background-color: #fff7ed !important;
    }

    /* Layout fixes */
    .topic-cards {
        display: block !important;
    }

    .topic-card {
        break-inside: avoid;
        page-break-inside: avoid;
        border: 1px solid #ccc !important;
        margin-bottom: 20px !important;
        display: block !important;
        background: white !important;
    }

    /* Images */
    img {
        filter: none !important;
        -webkit-filter: none !important;
        max-width: 100% !important;
        display: block !important;
    }

    /* Recommendation Cards */
    .recommendation-cards {
        display: flex !important;
        flex-direction: row !important;
        gap: 16px !important;
        margin-bottom: 24px !important;
        break-inside: avoid;
    }

    .recommendation-card {
        flex: 1 !important;
        height: 150px !important;
        border: 1px solid #ccc !important;
        border-radius: 16px !important;
        overflow: hidden !important;
        position: relative !important;
        background-color: #333 !important;
        /* Fallback */
        display: block !important;
        text-decoration: none !important;
    }

    .recommendation-card__image {
        opacity: 1 !important;
        visibility: visible !important;
        z-index: 0 !important;
    }

    .recommendation-card__content {
        z-index: 10 !important;
    }
}